# 项目结构说明文档

本文档旨在清晰地阐述本项目中各个目录和核心文件的作用，以便于快速理解整个项目的架构和工作流程。

---

## 根目录 (`/`)

存放项目核心配置文件和主启动程序。

-   **`main.py`**
    -   **作用**: 项目的 **主启动入口**。它使用FastAPI框架创建并运行一个Web服务器，为前端提供API接口。我们最终运行的就是这个文件。

-   **`config.py`**
    -   **作用**: 项目的 **全局配置文件**。存放了如API密钥、模型名称、Prompt模板等需要集中管理的配置项。

-   **`rag-frontend/`**
    -   **作用**: **前端React应用** 的所有代码都存放在这里。它负责构建用户交互界面。

-   **`core/`**
    -   **作用**: **后端核心逻辑** 目录。包含了所有实现RAG流程的核心Python模块。

-   **`data/`**
    -   **作用**: 存放 **原始数据** 和 **处理后的数据**。

-   **`stock_data/`**
    -   **作用**: 存放用于 **批量问答模式** 的数据文件。

-   **`vector_store/`**
    -   **作用**: 存放 **向量数据库**。这是我们知识库的"大脑"，存储了所有文档的向量化版本。

---

## `core/` - 后端核心逻辑

-   **`knowledge_base_manager.py`**
    -   **作用**: **知识库管理器**。负责加载、处理、分割文档，并创建和管理向量数据库。是构建知识库的"建筑师"。

-   **`llm_service.py`**
    -   **作用**: **大语言模型服务**。封装了与通义千问大模型所有相关的API调用，如获取Embedding、生成文本、重排文档等。是我们的"专家顾问"。

-   **`qa_service.py`**
    -   **作用**: **问答服务总控**。串联起知识库和LLM服务，完整地执行"检索-重排-生成"的RAG流程。是整个后端应用的"总指挥"。

-   **`intent_recognizer.py`**
    -   **作用**: **意图识别器**。根据用户问题的关键词，判断其意图（如普通提问或SWOT分析），并返回不同的Prompt模板。

-   **`pdf_parser.py`**
    -   **作用**: **PDF解析器**。负责读取`data/raw_reports`中的PDF文件，将其内容解析并转换为结构化的JSON格式，存入`data/processed`。

---

## `rag-frontend/` - 前端应用

-   **`src/App.jsx`**
    -   **作用**: React应用的 **主组件**。包含了前端页面的所有UI布局、状态管理和API交互逻辑。

-   **`tailwind.config.js` & `postcss.config.js`**
    -   **作用**: **Tailwind CSS的配置文件**。用于定义前端UI框架的样式和插件。

---

## `data/` - 数据目录

-   **`raw_reports/`**
    -   **作用**: 存放 **原始的PDF研报文件**。这是我们知识库的最初源头。

-   **`processed/`**
    -   **作用**: 存放由`pdf_parser.py`处理后生成的 **结构化JSON文件**。这些文件是构建向量数据库的直接输入。

---

## `stock_data/` - 批量处理数据

-   **`questions.json`**
    -   **作用**: 存放用于 **批量问答模式** 的问题列表。

-   **`answers.json`**
    -   **作用**: 存放批量问答模式运行后 **生成的答案**。